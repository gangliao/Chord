INCLUDE(ExternalProject)

find_package(OpenSSL REQUIRED)
include_directories(${OPENSSL_INCLUDE_DIR})

IF(${OPENSSL_CRYPTO_LIBRARY} MATCHES "${CMAKE_STATIC_LIBRARY_SUFFIX}$")
    SET(openssl_LIBTYPE STATIC)
ELSEIF(${OPENSSL_CRYPTO_LIBRARY} MATCHES "${CMAKE_SHARED_LIBRARY_SUFFIX}$")
    SET(openssl_LIBTYPE SHARED)
ELSE()
    MESSAGE(FATAL_ERROR "Unknown library type: ${OPENSSL_CRYPTO_LIBRARY}")
ENDIF()

ADD_LIBRARY(crypto ${openssl_LIBTYPE} IMPORTED GLOBAL)
SET_PROPERTY(TARGET crypto PROPERTY IMPORTED_LOCATION ${OPENSSL_CRYPTO_LIBRARY})

ADD_LIBRARY(ssl ${openssl_LIBTYPE} IMPORTED GLOBAL)
SET_PROPERTY(TARGET ssl PROPERTY IMPORTED_LOCATION ${OPENSSL_SSL_LIBRARY})
